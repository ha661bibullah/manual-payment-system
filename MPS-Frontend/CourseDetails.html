<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <title>‡¶™‡ßç‡¶∞‡¶æ‡¶ï‡¶ü‡¶ø‡¶ï‡¶æ‡¶≤ ‡¶á‡¶¨‡¶æ‡¶∞‡¶§ ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;500;600;700&display=swap');
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Hind Siliguri', 'Bangla', sans-serif;
        }
        
        :root {
            --primary-color: #5e35b1;
            --secondary-color: #43a047;
            --accent-color: #ff6f00;
            --text-color: #2d3436;
            --light-bg: #f5f5f5;
            --card-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            --gradient-bg: linear-gradient(135deg, #5e35b1 0%, #3949ab 100%);
            --border-radius: 12px;
        }
        
        body {
            background-color: var(--light-bg);
            color: var(--text-color);
            line-height: 1.6;
            font-size: 16px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 25px;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            margin-bottom: 35px;
            background: var(--gradient-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
        }
        
        header h1 {
            font-size: 38px;
            font-weight: bold;
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            letter-spacing: 0.5px;
        }
        
        .tab-container {
            display: flex;
            gap: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        .tab {
            padding: 12px 24px;
            background-color: white;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: all 0.4s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            font-weight: 500;
            border: 1px solid transparent;
        }
        
        .tab.active {
            background: var(--gradient-bg);
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(94, 53, 177, 0.3);
        }
        
        .tab:hover:not(.active) {
            background-color: rgba(94, 53, 177, 0.1);
            border-color: var(--primary-color);
            transform: translateY(-2px);
        }
        
        .course-details {
            display: flex;
            gap: 35px;
        }
        
        .main-content {
            flex: 2;
        }
        
        .sidebar {
            flex: 1;
        }
        
        .course-image {
            width: 100%;
            border-radius: var(--border-radius);
            margin-bottom: 25px;
            box-shadow: var(--card-shadow);
            transition: transform 0.3s ease;
            overflow: hidden;
        }
        
        .course-image:hover {
            transform: scale(1.02);
        }
        
        .course-instructor {
            display: flex;
            align-items: center;
            padding: 0;
            margin: 0;
            margin-bottom: 25px;
        }
        
        .instructor-image {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            margin-right: 20px;
            object-fit: cover;
            border: 3px solid var(--primary-color);
            box-shadow: 0 4px 10px rgba(94, 53, 177, 0.3);
        }
        
        .instructor-details h3 {
            font-size: 20px;
            margin-bottom: 5px;
            color: var(--primary-color);
        }
        
        .instructor-details p {
            color: #555;
            font-size: 15px;
            margin-bottom: 5px;
        }
        
        .instructor-details .experience {
            color: var(--primary-color);
            font-weight: 500;
            display: inline-block;
            padding: 3px 8px;
            background: rgba(94, 53, 177, 0.1);
            border-radius: 4px;
        }
        
        .course-pricing {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--card-shadow);
            position: relative;
            overflow: hidden;
            text-align: center;    
        }
        
        .course-pricing::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--gradient-bg);
        }
        
        .price {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }
        
        .current-price {
            font-size: 32px;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .original-price {
            font-size: 20px;
            text-decoration: line-through;
            color: #999;
            margin-left: 12px;
        }
        
        .buy-btn {
            background: var(--gradient-bg);
            color: white;
            border: none;
            padding: 14px;
            width: 100%;
            border-radius: var(--border-radius);
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 10px rgba(94, 53, 177, 0.3);
            letter-spacing: 0.5px;
            text-decoration: none;
            display: block;
            text-align: center;
        }
        
        .active-course-btn {
            background: var(--secondary-color);
            color: white;
            border: none;
            padding: 14px;
            width: 100%;
            border-radius: var(--border-radius);
            font-size: 18px;
            font-weight: 600;
            box-shadow: 0 4px 10px rgba(67, 160, 71, 0.3);
            letter-spacing: 0.5px;
            text-align: center;
        }
        
        .course-stats {
            margin-top: 20px;
        }
        
        .stat-item {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            padding: 8px 0;
            border-bottom: 1px dashed rgba(94, 53, 177, 0.2);
        }
        
        .stat-item:last-child {
            border-bottom: none;
        }
        
        .stat-icon {
            color: var(--primary-color);
            margin-right: 12px;
            font-size: 18px;
        }
        
        .content-box {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--card-shadow);
            position: relative;
            overflow: hidden;
        }
        
        .content-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: var(--gradient-bg);
        }
        
        .content-title {
            font-size: 22px;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--primary-color);
            border-bottom: 1px solid rgba(94, 53, 177, 0.2);
            padding-bottom: 12px;
            position: relative;
        }
        
        .content-text {
            color: #444;
            line-height: 1.8;
            margin-bottom: 15px;
            font-size: 16px;
        }
        
        .read-more {
            color: var(--primary-color);
            font-weight: 500;
            cursor: pointer;
            display: inline-block;
            margin-top: 10px;
            padding: 5px 10px;
            border-radius: 4px;
            background: rgba(94, 53, 177, 0.1);
            transition: all 0.3s;
        }
        
        .read-more:hover {
            background: rgba(94, 53, 177, 0.2);
            transform: translateX(5px);
        }
        
        .hidden-content {
            display: none;
        }
        
        /* Tab Content Styles */
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Video Section */
        .video-container {
            height: 450px;
            overflow-y: auto;
            border: 1px solid rgba(94, 53, 177, 0.2);
            border-radius: var(--border-radius);
            padding: 15px;
            background: white;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) #f1f1f1;
        }
        
        .video-container::-webkit-scrollbar {
            width: 8px;
        }
        
        .video-container::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        .video-container::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 10px;
        }
        
        .video-item {
            display: flex;
            align-items: center;
            padding: 18px;
            border-bottom: 1px solid rgba(94, 53, 177, 0.1);
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 8px;
        }
        
        .video-item:hover {
            background-color: rgba(94, 53, 177, 0.05);
            transform: translateX(5px);
        }
        
        .video-item.locked {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .video-item.locked:hover {
            transform: none;
            background-color: transparent;
        }
        
        .video-icon {
            margin-right: 15px;
            color: var(--primary-color);
            font-size: 20px;
        }
        
        .video-title {
            flex: 1;
            font-weight: 500;
        }
        
        .video-duration {
            color: #666;
            font-size: 14px;
            background: rgba(94, 53, 177, 0.1);
            padding: 3px 8px;
            border-radius: 4px;
        }
        
        .video-lock {
            color: #999;
            margin-left: 12px;
        }
        
        .video-free {
            color: var(--secondary-color);
            margin-left: 12px;
            font-weight: 500;
            background: rgba(67, 160, 71, 0.1);
            padding: 3px 8px;
            border-radius: 4px;
        }
        
        /* Notes Section */
        .notes-container {
            height: 450px;
            overflow-y: auto;
            border: 1px solid rgba(94, 53, 177, 0.2);
            border-radius: var(--border-radius);
            padding: 15px;
            background: white;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) #f1f1f1;
        }
        
        .notes-container::-webkit-scrollbar {
            width: 8px;
        }
        
        .notes-container::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        .notes-container::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 10px;
        }
        
        .note-item {
            display: flex;
            align-items: center;
            padding: 18px;
            border-bottom: 1px solid rgba(94, 53, 177, 0.1);
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 8px;
        }
        
        .note-item:hover {
            background-color: rgba(94, 53, 177, 0.05);
            transform: translateX(5px);
        }
        
        .note-item.locked {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .note-item.locked:hover {
            transform: none;
            background-color: transparent;
        }
        
        .note-icon {
            margin-right: 15px;
            color: var(--primary-color);
            font-size: 20px;
        }
        
        .note-title {
            flex: 1;
            font-weight: 500;
        }
        
        .note-lock {
            color: #999;
            margin-left: 12px;
        }
        
        .note-free {
            color: var(--secondary-color);
            margin-left: 12px;
            font-weight: 500;
            background: rgba(67, 160, 71, 0.1);
            padding: 3px 8px;
            border-radius: 4px;
        }
        
        /* Reviews Section */
        .reviews-container {
            height: 450px;
            overflow-y: auto;
            padding: 10px 0;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) #f1f1f1;
        }
        
        .reviews-container::-webkit-scrollbar {
            width: 8px;
        }
        
        .reviews-container::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        .reviews-container::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 10px;
        }
        
        .review {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            position: relative;
            transition: all 0.3s;
        }
        
        .review:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }
        
        .review::before {
            content: '"';
            position: absolute;
            right: 20px;
            top: 10px;
            font-size: 60px;
            color: rgba(94, 53, 177, 0.1);
            font-family: serif;
            line-height: 1;
        }
        
        .review-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .reviewer-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-right: 15px;
            background: var(--gradient-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 18px;
            box-shadow: 0 4px 10px rgba(94, 53, 177, 0.3);
        }
        
        .reviewer-name {
            font-weight: 600;
            font-size: 17px;
            color: var(--primary-color);
        }
        
        .review-date {
            color: #777;
            font-size: 12px;
            margin-left: auto;
            background: rgba(0, 0, 0, 0.05);
            padding: 3px 8px;
            border-radius: 4px;
        }
        
        .star-rating {
            color: #FFD700;
            margin-bottom: 12px;
            font-size: 18px;
        }
        
        .review-text {
            color: #555;
            line-height: 1.7;
            font-size: 15px;
        }
        
        .review-form {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            margin-top: 25px;
            box-shadow: var(--card-shadow);
            position: relative;
            overflow: hidden;
        }
        
        .review-form.hidden {
            display: none;
        }
        
        .review-form::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--gradient-bg);
        }
        
        .review-form h3 {
            margin-bottom: 20px;
            color: var(--primary-color);
            font-size: 22px;
        }
        
        .rating-select {
            margin-bottom: 20px;
        }
        
        .rating-select select {
            width: 100%;
            padding: 10px;
            border: 1px solid rgba(94, 53, 177, 0.2);
            border-radius: 8px;
            font-family: inherit;
        }
        
        .review-textarea {
            width: 100%;
            height: 120px;
            padding: 15px;
            border: 1px solid rgba(94, 53, 177, 0.2);
            border-radius: 8px;
            margin-bottom: 20px;
            font-family: inherit;
            resize: vertical;
            transition: all 0.3s;
        }
        
        .review-textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(94, 53, 177, 0.1);
        }
        
        .submit-review {
            background: var(--gradient-bg);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            box-shadow: 0 4px 10px rgba(94, 53, 177, 0.3);
        }
        
        .submit-review:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(94, 53, 177, 0.5);
        }
        
        .purchase-note {
            font-size: 13px;
            color: #666;
            margin-top: 15px;
            font-style: italic;
            background: rgba(0, 0, 0, 0.03);
            padding: 8px;
            border-radius: 4px;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 25px;
            border-radius: var(--border-radius);
            width: 80%;
            max-width: 800px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            position: relative;
        }
        
        .close-modal {
            color: var(--primary-color);
            float: right;
            font-size: 32px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .close-modal:hover {
            background: rgba(94, 53, 177, 0.1);
            transform: rotate(90deg);
        }
        
        .modal-title {
            margin-bottom: 25px;
            color: var(--primary-color);
            font-size: 26px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(94, 53, 177, 0.2);
        }
        
        .modal-pdf {
            width: 100%;
            height: 70vh;
            border: none;
            border-radius: 8px;
        }
        
        .modal-video {
            width: 100%;
            max-height: 70vh;
            border-radius: 8px;
        }
        
        .locked-message {
            text-align: center;
            color: #666;
            font-style: italic;
            padding: 20px;
            background: rgba(0, 0, 0, 0.05);
            border-radius: 8px;
            margin: 20px 0;
        }
        
        /* Payment Form Styles */
        .payment-form {
            background: white;
            padding: 20px;
            border-radius: var(--border-radius);
            margin-top: 20px;
        }
        
        .payment-form input,
        .payment-form select {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-family: inherit;
        }
        
        .payment-form button {
            width: 100%;
            padding: 12px;
            background: var(--gradient-bg);
            color: white;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .payment-form button:hover {
            opacity: 0.9;
        }
        
        .payment-message {
            margin-top: 15px;
            padding: 10px;
            border-radius: 6px;
            text-align: center;
        }
        
        .success {
            background-color: rgba(67, 160, 71, 0.1);
            color: var(--secondary-color);
        }
        
        .error {
            background-color: rgba(220, 53, 69, 0.1);
            color: #dc3545;
        }
        
        .active-course-badge {
            background: var(--secondary-color);
            color: white;
            padding: 12px;
            border-radius: var(--border-radius);
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 0 4px 10px rgba(67, 160, 71, 0.3);
        }
        
        .pending-course-badge {
            background: #FFA000;
            color: white;
            padding: 12px;
            border-radius: var(--border-radius);
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 0 4px 10px rgba(255, 160, 0, 0.3);
        }
        
        /* Loading Spinner */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
            margin-left: 10px;
        }
        
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .loading-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .loading-text {
            margin-top: 15px;
            font-weight: 500;
            color: var(--primary-color);
        }
        
        @media (max-width: 768px) {
            .course-details {
                flex-direction: column-reverse;
            }
            
            .sidebar {
                order: -1;
            }
            
            .tab-container {
                overflow-x: auto;
                white-space: nowrap;
                padding-bottom: 8px;
                font-size: 14px;
                gap: 8px;
                padding: 0;
                margin-bottom: 20px;
                scrollbar-width: thin;
                scrollbar-color: var(--primary-color) #f1f1f1;
            }
            
            .tab-container::-webkit-scrollbar {
                height: 4px;
            }
            
            .tab-container::-webkit-scrollbar-track {
                background: #f1f1f1;
                border-radius: 10px;
            }
            
            .tab-container::-webkit-scrollbar-thumb {
                background: var(--primary-color);
                border-radius: 10px;
            }
            
            .tab {
                display: inline-block;
                padding: 10px 16px;
                font-size: 14px;
            }
            
            .modal-content {
                width: 95%;
                margin: 10% auto;
            }
            
            .modal-pdf, .modal-video {
                height: 60vh;
            }
            
            header h1 {
                font-size: 28px;
            }
            
            .content-title {
                font-size: 20px;
            }
            
            .current-price {
                font-size: 28px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>‡¶™‡ßç‡¶∞‡¶æ‡¶ï‡¶ü‡¶ø‡¶ï‡¶æ‡¶≤ ‡¶á‡¶¨‡¶æ‡¶∞‡¶§ ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ</h1>
        </header>
        
        <div class="tab-container">
            <div class="tab active" onclick="openTab('details')">‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶™‡¶°‡¶º‡ßÅ‡¶®</div>
            <div class="tab" onclick="openTab('video')">‡¶≠‡¶ø‡¶°‡¶ø‡¶ì</div>
            <div class="tab" onclick="openTab('notes')">‡¶®‡ßã‡¶ü</div>
            <div class="tab" onclick="openTab('reviews')">‡¶ï‡ßã‡¶∞‡ßç‡¶∏ ‡¶∞‡¶ø‡¶≠‡¶ø‡¶â</div>
        </div>
        
        <div class="course-details">
            <div class="main-content">
                <div id="details" class="tab-content active">
                    <div class="content-box">
                        <div class="course-instructor">
                            <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=200&h=200&fit=crop&crop=face" alt="‡¶Æ‡¶æ‡¶ì‡¶≤‡¶æ‡¶®‡¶æ ‡¶Æ‡ßÅ‡¶®‡¶§‡¶æ‡¶π‡¶æ ‡¶Ü‡¶π‡¶Æ‡¶¶" class="instructor-image">
                            <div class="instructor-details">
                                <h3>‡¶Æ‡¶æ‡¶ì‡¶≤‡¶æ‡¶®‡¶æ ‡¶Æ‡ßÅ‡¶®‡¶§‡¶æ‡¶π‡¶æ ‡¶Ü‡¶π‡¶Æ‡¶¶</h3>
                                <p>‡¶á‡¶¨‡¶æ‡¶∞‡¶§ ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑‡¶ú‡ßç‡¶û, ‡¶Ü‡¶≤-‡¶Ü‡¶ú‡¶π‡¶æ‡¶∞ ‡¶¨‡¶ø‡¶∂‡ßç‡¶¨‡¶¨‡¶ø‡¶¶‡ßç‡¶Ø‡¶æ‡¶≤‡¶Ø‡¶º</p>
                                <p class="experience">‡ßß‡ß´+ ‡¶¨‡¶õ‡¶∞‡ßá‡¶∞ ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶ï‡¶§‡¶æ ‡¶Ö‡¶≠‡¶ø‡¶ú‡ßç‡¶û‡¶§‡¶æ</p>
                            </div>
                        </div>
                        <h2 class="content-title">‡¶ï‡ßã‡¶∞‡ßç‡¶∏ ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá ‡¶ú‡¶æ‡¶®‡ßÅ‡¶®</h2>
                        <p class="content-text">
                            ‡¶Ö‡¶®‡ßá‡¶ï ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶ï ‡¶Ü‡¶∞‡¶¨‡¶ø ‡¶á‡¶¨‡¶æ‡¶∞‡¶§ ‡¶™‡¶°‡¶º‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶® ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶∞‡ßç‡¶•‡ßÄ‡¶¶‡ßá‡¶∞ ‡¶ï‡¶æ‡¶õ‡ßá ‡¶∏‡¶π‡¶ú‡¶≠‡¶æ‡¶¨‡ßá ‡¶¨‡ßÅ‡¶ù‡¶ø‡¶Ø‡¶º‡ßá ‡¶¨‡¶≤‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶® ‡¶®‡¶æ‡•§ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶Ö‡¶®‡ßá‡¶ï‡ßá ‡¶¨‡¶á ‡¶•‡ßá‡¶ï‡ßá ‡¶™‡¶°‡¶º‡ßá ‡¶∂‡ßã‡¶®‡¶æ‡¶® ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ-‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶® ‡¶®‡¶æ‡•§ ‡¶è‡¶á ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶∏‡¶Æ‡¶æ‡¶ß‡¶æ‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø‡¶á ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶è‡¶á ‡¶ï‡ßã‡¶∞‡ßç‡¶∏‡•§
                        </p>
                        <p class="content-text hidden-content" id="more-content">
                            ‡¶è‡¶á ‡¶ï‡ßã‡¶∞‡ßç‡¶∏‡ßá‡¶∞ ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶∂‡¶ø‡¶ñ‡¶¨‡ßá‡¶® ‡¶ï‡ßÄ‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶Ü‡¶∞‡¶¨‡¶ø ‡¶á‡¶¨‡¶æ‡¶∞‡¶§ ‡¶∏‡¶π‡¶ú‡ßá ‡¶™‡¶°‡¶º‡¶§‡ßá ‡¶ì ‡¶¨‡ßÅ‡¶ù‡¶§‡ßá ‡¶π‡¶Ø‡¶º‡•§ ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶§‡¶æ‡¶á ‡¶®‡¶Ø‡¶º, ‡¶Ö‡¶®‡ßç‡¶Ø‡¶¶‡ßá‡¶∞‡¶ì ‡¶∂‡ßá‡¶ñ‡¶æ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§ ‡¶®‡¶æ‡¶π‡ßÅ-‡¶∏‡¶∞‡¶´‡ßá‡¶∞ ‡¶Æ‡ßå‡¶≤‡¶ø‡¶ï ‡¶®‡¶ø‡¶Ø‡¶º‡¶Æ‡¶ï‡¶æ‡¶®‡ßÅ‡¶® ‡¶•‡ßá‡¶ï‡ßá ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßá ‡¶â‡¶®‡ßç‡¶®‡¶§ ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶Ø‡¶º‡ßá‡¶∞ ‡¶á‡¶¨‡¶æ‡¶∞‡¶§ ‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£ ‡¶™‡¶∞‡ßç‡¶Ø‡¶®‡ßç‡¶§ ‡¶∏‡¶¨‡¶ï‡¶ø‡¶õ‡ßÅ‡¶á ‡¶∞‡¶Ø‡¶º‡ßá‡¶õ‡ßá ‡¶è‡¶á ‡¶ï‡ßã‡¶∞‡ßç‡¶∏‡ßá‡•§ ‡¶á‡¶®‡¶∂‡¶æ‡¶Ü‡¶≤‡ßç‡¶≤‡¶æ‡¶π ‡¶è‡¶á ‡¶ï‡ßã‡¶∞‡ßç‡¶∏ ‡¶∂‡ßá‡¶∑‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶è‡¶ï‡¶ú‡¶® ‡¶¶‡¶ï‡ßç‡¶∑ ‡¶á‡¶¨‡¶æ‡¶∞‡¶§ ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶ï ‡¶π‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§
                        </p>
                        <span class="read-more" onclick="toggleContent()">‡¶Ü‡¶∞‡ßã ‡¶™‡¶°‡¶º‡ßÅ‡¶®</span>
                    </div>
                </div>
                
                <div id="video" class="tab-content">
                    <div class="content-box">
                        <h2 class="content-title">‡¶ï‡ßã‡¶∞‡ßç‡¶∏‡ßá‡¶∞ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶∏‡¶Æ‡ßÇ‡¶π</h2>
                        <div class="video-container" id="videosList">
                            <!-- Videos will be loaded dynamically -->
                        </div>
                    </div>
                </div>
                
                <div id="notes" class="tab-content">
                    <div class="content-box">
                        <h2 class="content-title">‡¶ï‡ßã‡¶∞‡ßç‡¶∏‡ßá‡¶∞ ‡¶®‡ßã‡¶ü ‡¶∏‡¶Æ‡ßÇ‡¶π</h2>
                        <div class="notes-container" id="notesList">
                            <!-- Notes will be loaded dynamically -->
                        </div>
                    </div>
                </div>
                
                <div id="reviews" class="tab-content">
                    <div class="reviews-container" id="reviewsList">
                        <!-- Reviews will be loaded dynamically -->
                    </div>
                    
                    <div class="review-form hidden" id="reviewForm">
                        <h3>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∞‡¶ø‡¶≠‡¶ø‡¶â ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®</h3>
                        <div class="rating-select">
                            <select id="rating">
                                <option value="">‡¶∞‡ßá‡¶ü‡¶ø‡¶Ç ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</option>
                                <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (‡ß´ ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞)</option>
                                <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê (‡ß™ ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞)</option>
                                <option value="3">‚≠ê‚≠ê‚≠ê (‡ß© ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞)</option>
                                <option value="2">‚≠ê‚≠ê (‡ß® ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞)</option>
                                <option value="1">‚≠ê (‡ßß ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞)</option>
                            </select>
                        </div>
                        <textarea class="review-textarea" id="reviewText" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶≠‡¶ø‡¶ú‡ßç‡¶û‡¶§‡¶æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..."></textarea>
                        <button class="submit-review" onclick="submitReview()">‡¶∞‡¶ø‡¶≠‡¶ø‡¶â ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®</button>
                    </div>
                </div>
            </div>
            
            <div class="sidebar">
                <img src="https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=400&h=250&fit=crop" alt="‡¶ï‡ßã‡¶∞‡ßç‡¶∏ ‡¶á‡¶Æ‡ßá‡¶ú" class="course-image">
                
                <div id="pricing-section" class="course-pricing">
                    <div class="price">
                        <span class="current-price">‡ß≥ ‡ßß,‡ß´‡ß¶‡ß¶</span>
                        <span class="original-price">‡ß≥ ‡ß©,‡ß¶‡ß¶‡ß¶</span>
                    </div>
                    <a href="#" class="buy-btn" onclick="purchaseCourse()">‡¶è‡¶ñ‡¶®‡¶á ‡¶ï‡¶ø‡¶®‡ßÅ‡¶®</a>
                    <div class="course-stats">
                        <div class="stat-item">
                            <span class="stat-icon">üë•</span>
                            <span>‡ßß‡ß®,‡ß´‡ß¶‡ß¶+ ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶∞‡ßç‡¶•‡ßÄ</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">üì∫</span>
                            <span>‡ßß‡ß¶‡¶ü‡¶ø ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶≤‡ßá‡¶∏‡¶®</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">‚è±Ô∏è</span>
                            <span>‡¶Æ‡ßã‡¶ü ‡ßÆ ‡¶ò‡¶®‡ßç‡¶ü‡¶æ</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">üìÑ</span>
                            <span>‡ßÆ‡¶ü‡¶ø ‡¶™‡¶ø‡¶°‡¶ø‡¶è‡¶´ ‡¶®‡ßã‡¶ü</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">üèÜ</span>
                            <span>‡¶∏‡¶æ‡¶∞‡ßç‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶ü</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">‚ôæÔ∏è</span>
                            <span>‡¶Ü‡¶ú‡ßÄ‡¶¨‡¶® ‡¶è‡¶ï‡ßç‡¶∏‡ßá‡¶∏</span>
                        </div>
                    </div>
                </div>
                
                <div id="what-you-learn" class="content-box">
                    <h2 class="content-title">‡¶ï‡ßã‡¶∞‡ßç‡¶∏‡ßá ‡¶Ø‡¶æ ‡¶∂‡¶ø‡¶ñ‡¶¨‡ßá‡¶®</h2>
                    <ul style="list-style: none; padding: 0;">
                        <li style="margin-bottom: 10px; padding-left: 25px; position: relative;">
                            <span style="position: absolute; left: 0; color: var(--secondary-color);">‚úì</span>
                            ‡¶Ü‡¶∞‡¶¨‡¶ø ‡¶á‡¶¨‡¶æ‡¶∞‡¶§ ‡¶∏‡¶†‡¶ø‡¶ï‡¶≠‡¶æ‡¶¨‡ßá ‡¶™‡¶°‡¶º‡¶æ‡¶∞ ‡¶ï‡ßå‡¶∂‡¶≤
                        </li>
                        <li style="margin-bottom: 10px; padding-left: 25px; position: relative;">
                            <span style="position: absolute; left: 0; color: var(--secondary-color);">‚úì</span>
                            ‡¶á‡¶¨‡¶æ‡¶∞‡¶§ ‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£ ‡¶ì ‡¶Ö‡¶®‡ßÅ‡¶¨‡¶æ‡¶¶‡ßá‡¶∞ ‡¶®‡¶ø‡¶Ø‡¶º‡¶Æ‡¶æ‡¶¨‡¶≤‡ßÄ
                        </li>
                        <li style="margin-bottom: 10px; padding-left: 25px; position: relative;">
                            <span style="position: absolute; left: 0; color: var(--secondary-color);">‚úì</span>
                            ‡¶®‡¶æ‡¶π‡ßÅ-‡¶∏‡¶∞‡¶´‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ó‡¶ø‡¶ï ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞
                        </li>
                        <li style="margin-bottom: 10px; padding-left: 25px; position: relative;">
                            <span style="position: absolute; left: 0; color: var(--secondary-color);">‚úì</span>
                            ‡¶ï‡ßÅ‡¶∞‡¶Ü‡¶®-‡¶π‡¶æ‡¶¶‡¶ø‡¶∏‡ßá‡¶∞ ‡¶á‡¶¨‡¶æ‡¶∞‡¶§ ‡¶¨‡ßÅ‡¶ù‡¶æ‡¶∞ ‡¶ï‡ßå‡¶∂‡¶≤
                        </li>
                        <li style="margin-bottom: 10px; padding-left: 25px; position: relative;">
                            <span style="position: absolute; left: 0; color: var(--secondary-color);">‚úì</span>
                            ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶ï‡¶§‡¶æ‡¶∞ ‡¶¶‡¶ï‡ßç‡¶∑‡¶§‡¶æ ‡¶¨‡ßÉ‡¶¶‡ßç‡¶ß‡¶ø
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal for Videos -->
    <div id="videoModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('videoModal')">&times;</span>
            <h2 class="modal-title" id="videoTitle">‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶≤‡ßá‡¶∏‡¶®</h2>
            <div id="videoContent">
                <video class="modal-video" controls>
                    <source src="" type="video/mp4">
                    ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡ßá ‡¶®‡¶æ‡•§
                </video>
            </div>
        </div>
    </div>
    
    <!-- Modal for Notes -->
    <div id="noteModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('noteModal')">&times;</span>
            <h2 class="modal-title" id="noteTitle">‡¶®‡ßã‡¶ü</h2>
            <div id="noteContent">
                <iframe class="modal-pdf" src=""></iframe>
            </div>
        </div>
    </div>
    
    <!-- Modal for Locked Content -->
    <div id="lockedModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('lockedModal')">&times;</span>
            <h2 class="modal-title">‡¶∏‡ßÄ‡¶Æ‡¶ø‡¶§ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü</h2>
            <div class="locked-message">
                <p>‡¶è‡¶á ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü‡¶ü‡¶ø ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶π‡¶≤‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶ï‡ßã‡¶∞‡ßç‡¶∏‡¶ü‡¶ø ‡¶ï‡ßç‡¶∞‡¶Ø‡¶º ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§</p>
                
                <div class="payment-section" style="margin-top: 30px;">
                    <h3 style="color: var(--primary-color); margin-bottom: 15px;">‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßÅ‡ßü‡¶æ‡¶≤ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
                    <p style="margin-bottom: 20px;">‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂ ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞: ‡ß¶‡ßß‡ßØ‡ßß‡ßß-‡ß´‡ß¨‡ß≠‡ßÆ‡ßØ‡ß¶ (Personal)</p>
                    
                    <form id="manualPaymentForm" style="background: #f9f9f9; padding: 20px; border-radius: 8px;">
                        <div style="margin-bottom: 15px;">
                            <input type="text" name="name" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ" required 
                                   style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                        </div>
                        <div style="margin-bottom: 15px;">
                            <input type="email" name="email" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶Æ‡ßá‡¶á‡¶≤" required 
                                   style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                        </div>
                        <div style="margin-bottom: 15px;">
                            <input type="text" name="phone" placeholder="‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞" required 
                                   style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                        </div>
                        <div style="margin-bottom: 15px;">
                            <input type="text" name="txnId" placeholder="Transaction ID" required 
                                   style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                        </div>
                        <div style="margin-bottom: 20px;">
                            <select name="paymentMethod" required 
                                    style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                                <option value="">‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</option>
                                <option value="bkash">‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂</option>
                                <option value="nagad">‡¶®‡¶ó‡¶¶</option>
                                <option value="bank">‡¶¨‡ßç‡¶Ø‡¶æ‡¶Ç‡¶ï</option>
                            </select>
                        </div>
                        <input type="hidden" name="courseId" value="practical-ibarot">
                        <button type="submit" 
                                style="background: var(--gradient-bg); color: white; border: none; padding: 12px 20px; 
                                       width: 100%; border-radius: 4px; cursor: pointer; font-weight: 500;">
                            ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
                        </button>
                    </form>
                    
                    <p id="paymentMessage" style="margin-top: 15px; text-align: center;"></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==============================================
        // API SERVICE FOR BACKEND COMMUNICATION
        // ==============================================
        const backendAPI = {
            baseUrl: 'https://mps-backend-72ax.onrender.com', // Change to your production URL
            
            // Get course details
            async getCourseDetails(courseId) {
                const response = await fetch(`${this.baseUrl}/courses/${courseId}`);
                return await response.json();
            },
            
            // Get course videos
            async getCourseVideos(courseId) {
                const response = await fetch(`${this.baseUrl}/courses/${courseId}/videos`);
                return await response.json();
            },
            
            // Get course notes
            async getCourseNotes(courseId) {
                const response = await fetch(`${this.baseUrl}/courses/${courseId}/notes`);
                return await response.json();
            },
            
            // Get course reviews
            async getCourseReviews(courseId) {
                const response = await fetch(`${this.baseUrl}/courses/${courseId}/reviews`);
                return await response.json();
            },
            
            // Check course access
            async checkCourseAccess(courseId, token) {
                const response = await fetch(`${this.baseUrl}/check-access/${courseId}`, {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                return await response.json();
            },
            
            // Purchase course
            async purchaseCourse(purchaseData, token) {
                const response = await fetch(`${this.baseUrl}/purchase`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify(purchaseData)
                });
                return await response.json();
            },
            
            // Submit review
            async submitReview(reviewData, token) {
                const response = await fetch(`${this.baseUrl}/reviews`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify(reviewData)
                });
                return await response.json();
            },
            
            // Verify manual payment
            async verifyPayment(paymentData, token) {
                const response = await fetch(`${this.baseUrl}/verify-payment`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify(paymentData)
                });
                return await response.json();
            }
        };

        // Auth Service for handling authentication
        const authService = {
            getToken() {
                return localStorage.getItem('authToken');
            },
            
            setToken(token) {
                localStorage.setItem('authToken', token);
            },
            
            removeToken() {
                localStorage.removeItem('authToken');
            },
            
            isAuthenticated() {
                return !!this.getToken();
            }
        };

        // ==============================================
        // APPLICATION STATE MANAGEMENT
        // ==============================================
        let courseAccess = {
            isPurchased: false,
            userEmail: null,
            purchaseDate: null,
            isPending: false,
            pendingUntil: null
        };

        // Load course access state from localStorage
        function loadCourseState() {
            try {
                const savedState = localStorage.getItem('courseAccess_practical_ibarot');
                if (savedState) {
                    courseAccess = JSON.parse(savedState);
                }
            } catch (error) {
                console.log('Error loading course state:', error);
            }
        }

        // Save course access state to localStorage
        function saveCourseState() {
            try {
                localStorage.setItem('courseAccess_practical_ibarot', JSON.stringify(courseAccess));
            } catch (error) {
                console.log('Error saving course state:', error);
            }
        }

        // ==============================================
        // UI UPDATE FUNCTIONS
        // ==============================================
        function updateCourseUI(courseDetails, videos, notes, reviews) {
            // Update course title if needed
            document.querySelector('header h1').textContent = courseDetails.title;
            
            // Update instructor section
            document.querySelector('.instructor-details h3').textContent = courseDetails.instructor;
            
            // Update pricing section
            document.querySelector('.current-price').textContent = `‡ß≥ ${courseDetails.discountedPrice}`;
            document.querySelector('.original-price').textContent = `‡ß≥ ${courseDetails.price}`;
            
            // Update stats
            document.querySelectorAll('.stat-item')[0].querySelector('span:last-child').textContent = 
                `${courseDetails.stats.totalStudents}+ ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶∞‡ßç‡¶•‡ßÄ`;
            document.querySelectorAll('.stat-item')[1].querySelector('span:last-child').textContent = 
                `${courseDetails.stats.totalVideos}‡¶ü‡¶ø ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶≤‡ßá‡¶∏‡¶®`;
            document.querySelectorAll('.stat-item')[2].querySelector('span:last-child').textContent = 
                `‡¶Æ‡ßã‡¶ü ${courseDetails.stats.totalHours} ‡¶ò‡¶®‡ßç‡¶ü‡¶æ`;
            document.querySelectorAll('.stat-item')[3].querySelector('span:last-child').textContent = 
                `${courseDetails.stats.totalNotes}‡¶ü‡¶ø ‡¶™‡¶ø‡¶°‡¶ø‡¶è‡¶´ ‡¶®‡ßã‡¶ü`;
            
            // Update "What you'll learn" section
            const learnList = document.querySelector('#what-you-learn ul');
            learnList.innerHTML = '';
            courseDetails.whatYouLearn.forEach(item => {
                const li = document.createElement('li');
                li.style.marginBottom = '10px';
                li.style.paddingLeft = '25px';
                li.style.position = 'relative';
                li.innerHTML = `
                    <span style="position: absolute; left: 0; color: var(--secondary-color);">‚úì</span>
                    ${item}
                `;
                learnList.appendChild(li);
            });
            
            // Update videos list
            const videoContainer = document.querySelector('#videosList');
            videoContainer.innerHTML = '';
            videos.forEach(video => {
                const videoItem = document.createElement('div');
                videoItem.className = `video-item ${video.isFree ? '' : 'locked'}`;
                videoItem.setAttribute('data-video-id', video.videoId);
                videoItem.onclick = video.isFree ? 
                    () => openVideoModal(video.videoId) : 
                    () => showLockedMessage();
                videoItem.innerHTML = `
                    <div class="video-icon">‚ñ∂Ô∏è</div>
                    <div class="video-title">${video.title}</div>
                    <div class="video-duration">${video.duration}</div>
                    ${video.isFree ? 
                        '<div class="video-free">‡¶´‡ßç‡¶∞‡¶ø</div>' : 
                        '<div class="video-lock">üîí</div>'}
                `;
                videoContainer.appendChild(videoItem);
            });
            
            // Update notes list
            const notesContainer = document.querySelector('#notesList');
            notesContainer.innerHTML = '';
            notes.forEach(note => {
                const noteItem = document.createElement('div');
                noteItem.className = `note-item ${note.isFree ? '' : 'locked'}`;
                noteItem.setAttribute('data-note-id', note.noteId);
                noteItem.onclick = note.isFree ? 
                    () => openNoteModal(note.noteId) : 
                    () => showLockedMessage();
                noteItem.innerHTML = `
                    <div class="note-icon">üìÑ</div>
                    <div class="note-title">${note.title}</div>
                    ${note.isFree ? 
                        '<div class="note-free">‡¶´‡ßç‡¶∞‡¶ø</div>' : 
                        '<div class="note-lock">üîí</div>'}
                `;
                notesContainer.appendChild(noteItem);
            });
            
            // Update reviews
            updateReviewsUI(reviews);
        }

        function updateReviewsUI(reviews) {
            const reviewsContainer = document.querySelector('#reviewsList');
            reviewsContainer.innerHTML = '';
            
            reviews.forEach(review => {
                const reviewDiv = document.createElement('div');
                reviewDiv.className = 'review';
                
                // Get first letter of name for avatar
                const avatarLetter = review.userName ? review.userName.charAt(0) : 'U';
                
                // Create star rating
                const stars = '‚≠ê'.repeat(review.rating);
                
                reviewDiv.innerHTML = `
                    <div class="review-header">
                        <div class="reviewer-avatar">${avatarLetter}</div>
                        <div>
                            <div class="reviewer-name">${review.userName || '‡¶Ö‡¶ú‡¶æ‡¶®‡¶æ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ'}</div>
                            <div class="star-rating">${stars}</div>
                        </div>
                        <div class="review-date">${new Date(review.createdAt).toLocaleDateString('bn-BD')}</div>
                    </div>
                    <div class="review-text">
                        ${review.review}
                    </div>
                `;
                
                reviewsContainer.appendChild(reviewDiv);
            });
        }

        function updateUIAfterPurchase() {
            // Change buy button to active course button
            const pricingSection = document.getElementById('pricing-section');
            pricingSection.innerHTML = `
                <div class="active-course-badge">
                    <i class="fas fa-check-circle"></i> ‡¶Ü‡¶™‡¶®‡¶ø ‡¶è‡¶á ‡¶ï‡ßã‡¶∞‡ßç‡¶∏‡¶ü‡¶ø ‡¶ï‡ßç‡¶∞‡¶Ø‡¶º ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®
                </div>
                <div class="course-stats">
                    <div class="stat-item">
                        <span class="stat-icon">üìÖ</span>
                        <span>‡¶ï‡ßç‡¶∞‡¶Ø‡¶º‡ßá‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ: ${new Date().toLocaleDateString('bn-BD')}</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">üë§</span>
                        <span>‡¶á‡¶Æ‡ßá‡¶á‡¶≤: ${courseAccess.userEmail}</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">üì∫</span>
                        <span>‡ßß‡ß¶‡¶ü‡¶ø ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶≤‡ßá‡¶∏‡¶®</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">‚è±Ô∏è</span>
                        <span>‡¶Æ‡ßã‡¶ü ‡ßÆ ‡¶ò‡¶®‡ßç‡¶ü‡¶æ</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">üìÑ</span>
                        <span>‡ßÆ‡¶ü‡¶ø ‡¶™‡¶ø‡¶°‡¶ø‡¶è‡¶´ ‡¶®‡ßã‡¶ü</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">üèÜ</span>
                        <span>‡¶∏‡¶æ‡¶∞‡ßç‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶ü</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">‚ôæÔ∏è</span>
                        <span>‡¶Ü‡¶ú‡ßÄ‡¶¨‡¶® ‡¶è‡¶ï‡ßç‡¶∏‡ßá‡¶∏</span>
                    </div>
                </div>
            `;
            
            // Enable review form
            document.getElementById('reviewForm').classList.remove('hidden');
            
            // Unlock all video and note items (remove locked class)
            document.querySelectorAll('.video-item.locked').forEach(item => {
                item.classList.remove('locked');
                item.onclick = function() {
                    openVideoModal(this.getAttribute('data-video-id'));
                };
            });
            
            document.querySelectorAll('.note-item.locked').forEach(item => {
                item.classList.remove('locked');
                item.onclick = function() {
                    openNoteModal(this.getAttribute('data-note-id'));
                };
            });
        }

        function updateUIPendingVerification() {
            const pricingSection = document.getElementById('pricing-section');
            pricingSection.innerHTML = `
                <div class="pending-course-badge">
                    <i class="fas fa-clock"></i> ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ï‡ßã‡¶∞‡ßç‡¶∏‡¶ü‡¶ø ‡¶≠‡ßá‡¶∞‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶ß‡ßÄ‡¶®
                </div>
                <div class="course-stats">
                    <div class="stat-item">
                        <span class="stat-icon">üìÖ</span>
                        <span>‡¶Ü‡¶¨‡ßá‡¶¶‡¶®‡ßá‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ: ${new Date().toLocaleDateString('bn-BD')}</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">üë§</span>
                        <span>‡¶á‡¶Æ‡ßá‡¶á‡¶≤: ${courseAccess.userEmail}</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">‚è≥</span>
                        <span>‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏: ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶ß‡ßÄ‡¶®</span>
                    </div>
                </div>
            `;
        }

        // ==============================================
        // COURSE CONTENT PROTECTION
        // ==============================================
        function disableDownloads() {
            // Disable right-click context menu on videos and PDFs
            document.addEventListener('contextmenu', function(e) {
                if (e.target.tagName === 'VIDEO' || 
                    e.target.tagName === 'IFRAME' || 
                    e.target.closest('.modal-pdf-container') ||
                    e.target.closest('.modal-video')) {
                    e.preventDefault();
                    showProtectionAlert();
                    return false;
                }
            });

            // Disable keyboard shortcuts for downloading/saving
            document.addEventListener('keydown', function(e) {
                // Disable Ctrl+S, Ctrl+Shift+I, F12, Ctrl+U, etc.
                if ((e.ctrlKey && (e.key === 's' || e.key === 'S')) || 
                    (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'i')) ||
                    (e.key === 'F12') ||
                    (e.ctrlKey && (e.key === 'u' || e.key === 'U')) ||
                    (e.ctrlKey && (e.key === 'p' || e.key === 'P'))) {
                    
                    // Only prevent if video or PDF is open
                    if (document.getElementById('videoModal').style.display === 'block' ||
                        document.getElementById('noteModal').style.display === 'block') {
                        e.preventDefault();
                        showProtectionAlert();
                        return false;
                    }
                }
            });

            // Disable drag and drop
            document.addEventListener('dragstart', function(e) {
                if (e.target.tagName === 'VIDEO' || e.target.tagName === 'IFRAME') {
                    e.preventDefault();
                    showProtectionAlert();
                    return false;
                }
            });

            // Disable text selection
            document.addEventListener('selectstart', function(e) {
                if (e.target.tagName === 'VIDEO' || 
                    e.target.tagName === 'IFRAME' || 
                    e.target.closest('.modal-pdf-container') ||
                    e.target.closest('.modal-video')) {
                    e.preventDefault();
                    return false;
                }
            });
        }

        function showProtectionAlert() {
            const alertDiv = document.createElement('div');
            alertDiv.innerHTML = `
                <div style="
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: #ff4757;
                    color: white;
                    padding: 15px 20px;
                    border-radius: 8px;
                    z-index: 10000;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                    font-family: 'Hind Siliguri', sans-serif;
                    max-width: 300px;
                ">
                    <strong>‚ö†Ô∏è ‡¶∏‡¶§‡¶∞‡ßç‡¶ï‡¶§‡¶æ!</strong><br>
                    ‡¶è‡¶á ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡ßÅ‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§ ‡¶è‡¶¨‡¶Ç ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ‡•§
                </div>
            `;
            document.body.appendChild(alertDiv);
            
            // Auto remove after 3 seconds
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.parentNode.removeChild(alertDiv);
                }
            }, 3000);
        }

        function createProtectedVideoPlayer(videoUrl, title) {
            return `
                <div class="video-container" style="position: relative; user-select: none;">
                    <video 
                        class="modal-video" 
                        controls 
                        autoplay
                        controlslist="nodownload nofullscreen noremoteplayback"
                        disablepictureinpicture
                        oncontextmenu="return false;"
                        ondragstart="return false;"
                        onselectstart="return false;"
                        style="
                            width: 100%;
                            height: auto;
                            pointer-events: auto;
                            -webkit-user-select: none;
                            -moz-user-select: none;
                            -ms-user-select: none;
                            user-select: none;
                        "
                    >
                        <source src="${videoUrl}" type="video/mp4">
                        ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡ßá ‡¶®‡¶æ‡•§
                    </video>
                    <div style="
                        position: absolute;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        pointer-events: none;
                        background: transparent;
                        z-index: 1;
                    "></div>
                </div>
                <div style="
                    text-align: center;
                    margin-top: 10px;
                    font-size: 12px;
                    color: #666;
                    font-style: italic;
                ">
                    üîí ‡¶è‡¶á ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì‡¶ü‡¶ø ‡¶ï‡¶™‡¶ø‡¶∞‡¶æ‡¶á‡¶ü ‡¶∏‡ßÅ‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§
                </div>
            `;
        }

        function createProtectedPdfViewer(pdfUrl, title) {
            // Generate watermark text with user info if available
            const watermarkText = courseAccess.userEmail 
                ? `‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶≠‡ßá‡¶ü ‡¶ï‡¶™‡¶ø - ${courseAccess.userEmail}` 
                : '‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶≠‡ßá‡¶ü ‡¶ï‡¶™‡¶ø - ‡¶Ö‡¶®‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶ø‡¶§ ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶®‡¶ø‡¶∑‡¶ø‡¶¶‡ßç‡¶ß';
            
            return `
                <div class="modal-pdf-container">
                    <div class="pdf-viewer-container">
                        <iframe 
                            class="modal-pdf" 
                            src="${pdfUrl}#toolbar=0&navpanes=0"
                            oncontextmenu="return false;"
                            ondragstart="return false;"
                            onselectstart="return false;"
                            style="
                                pointer-events: auto;
                                -webkit-user-select: none;
                                -moz-user-select: none;
                                -ms-user-select: none;
                                user-select: none;
                            "
                        ></iframe>
                        <div class="pdf-protection-overlay"></div>
                        <div class="pdf-watermark" style="
                            position: absolute;
                            top: 50%;
                            left: 50%;
                            transform: translate(-50%, -50%) rotate(-45deg);
                            font-size: 24px;
                            color: rgba(255,0,0,0.2);
                            white-space: nowrap;
                            pointer-events: none;
                            z-index: 10;
                        ">${watermarkText}</div>
                    </div>
                    <div style="
                        text-align: center;
                        margin-top: 10px;
                        font-size: 12px;
                        color: #666;
                        font-style: italic;
                    ">
                        üîí ‡¶è‡¶á ‡¶®‡ßã‡¶ü‡¶ü‡¶ø ‡¶ï‡¶™‡¶ø‡¶∞‡¶æ‡¶á‡¶ü ‡¶∏‡ßÅ‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§ ‡¶è‡¶¨‡¶Ç ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ
                    </div>
                </div>
            `;
        }

        // ==============================================
        // CORE APPLICATION FUNCTIONS
        // ==============================================
        // Tab functionality
        function openTab(tabName) {
            var i, tabcontent, tabs;
            tabcontent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].classList.remove("active");
            }
            tabs = document.getElementsByClassName("tab");
            for (i = 0; i < tabs.length; i++) {
                tabs[i].classList.remove("active");
            }
            document.getElementById(tabName).classList.add("active");
            event.currentTarget.classList.add("active");
        }

        // Toggle content functionality
        function toggleContent() {
            var content = document.getElementById('more-content');
            var button = document.querySelector('.read-more');
            
            if (content.classList.contains('hidden-content')) {
                content.classList.remove('hidden-content');
                content.style.display = 'block';
                button.textContent = '‡¶ï‡¶Æ ‡¶™‡¶°‡¶º‡ßÅ‡¶®';
            } else {
                content.classList.add('hidden-content');
                content.style.display = 'none';
                button.textContent = '‡¶Ü‡¶∞‡ßã ‡¶™‡¶°‡¶º‡ßÅ‡¶®';
            }
        }

        // Enhanced video modal functionality with protection
        function openVideoModal(videoId) {
            // Check if course is pending
            if (courseAccess.isPending) {
                showPendingMessage();
                return;
            }
            
            // Check if course is purchased
            if (!courseAccess.isPurchased && videoId !== 'lesson-1') {
                showLockedMessage();
                return;
            }

            const videos = {
                'lesson-1': {
                    title: '‡¶á‡¶¨‡¶æ‡¶∞‡¶§ ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶∞ ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨ ‡¶ì ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡ßÄ‡¶Ø‡¶º‡¶§‡¶æ',
                    url: 'https://res.cloudinary.com/ddtfpqimk/video/upload/v1753088101/video_esq7dv.mp4'
                },
                'lesson-2': {
                    title: '‡¶Ü‡¶∞‡¶¨‡¶ø ‡¶¨‡¶∞‡ßç‡¶£‡¶Æ‡¶æ‡¶≤‡¶æ ‡¶ì ‡¶â‡¶ö‡ßç‡¶ö‡¶æ‡¶∞‡¶£',
                    url: 'https://res.cloudinary.com/ddtfpqimk/video/upload/v1753088101/video_esq7dv.mp4'
                },
                'lesson-3': {
                    title: '‡¶®‡¶æ‡¶π‡ßÅ (‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶∞‡¶£) ‡¶è‡¶∞ ‡¶Æ‡ßå‡¶≤‡¶ø‡¶ï ‡¶ß‡¶æ‡¶∞‡¶£‡¶æ',
                    url: 'https://res.cloudinary.com/ddtfpqimk/video/upload/v1753088101/video_esq7dv.mp4'
                },
                'lesson-4': {
                    title: '‡¶∏‡¶∞‡¶´ (‡¶∂‡¶¨‡ßç‡¶¶‡¶§‡¶§‡ßç‡¶§‡ßç‡¶¨) ‡¶è‡¶∞ ‡¶Æ‡ßå‡¶≤‡¶ø‡¶ï ‡¶ß‡¶æ‡¶∞‡¶£‡¶æ',
                    url: 'https://res.cloudinary.com/ddtfpqimk/video/upload/v1753088101/video_esq7dv.mp4'
                },
                'lesson-5': {
                    title: '‡¶¨‡¶æ‡¶ï‡ßç‡¶Ø ‡¶ó‡¶†‡¶® ‡¶ì ‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£',
                    url: 'https://res.cloudinary.com/ddtfpqimk/video/upload/v1753088101/video_esq7dv.mp4'
                },
                'lesson-6': {
                    title: '‡¶á‡¶¨‡¶æ‡¶∞‡¶§ ‡¶™‡¶°‡¶º‡¶æ‡¶∞ ‡¶ï‡ßå‡¶∂‡¶≤',
                    url: 'https://res.cloudinary.com/ddtfpqimk/video/upload/v1753088101/video_esq7dv.mp4'
                },
                'lesson-7': {
                    title: '‡¶á‡¶¨‡¶æ‡¶∞‡¶§ ‡¶Ö‡¶®‡ßÅ‡¶¨‡¶æ‡¶¶‡ßá‡¶∞ ‡¶®‡¶ø‡¶Ø‡¶º‡¶Æ‡¶ï‡¶æ‡¶®‡ßÅ‡¶®',
                    url: 'https://res.cloudinary.com/ddtfpqimk/video/upload/v1753088101/video_esq7dv.mp4'
                },
                'lesson-8': {
                    title: '‡¶ï‡ßÅ‡¶∞‡¶Ü‡¶®‡ßá‡¶∞ ‡¶á‡¶¨‡¶æ‡¶∞‡¶§ ‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£',
                    url: 'https://res.cloudinary.com/ddtfpqimk/video/upload/v1753088101/video_esq7dv.mp4'
                },
                'lesson-9': {
                    title: '‡¶π‡¶æ‡¶¶‡¶ø‡¶∏‡ßá‡¶∞ ‡¶á‡¶¨‡¶æ‡¶∞‡¶§ ‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£',
                    url: 'https://res.cloudinary.com/ddtfpqimk/video/upload/v1753088101/video_esq7dv.mp4'
                },
                'lesson-10': {
                    title: '‡¶á‡¶¨‡¶æ‡¶∞‡¶§ ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶æ‡¶Ø‡¶º‡ßã‡¶ó‡¶ø‡¶ï ‡¶ï‡ßå‡¶∂‡¶≤',
                    url: 'https://res.cloudinary.com/ddtfpqimk/video/upload/v1753088101/video_esq7dv.mp4'
                }
            };

            if (videos[videoId]) {
                const video = videos[videoId];
                document.getElementById('videoTitle').textContent = video.title;
                document.getElementById('videoContent').innerHTML = createProtectedVideoPlayer(video.url, video.title);
                document.getElementById('videoModal').style.display = 'block';
                
                // Add additional protection when video modal opens
                setTimeout(() => {
                    const videoElement = document.querySelector('#videoModal video');
                    if (videoElement) {
                        // Prevent video URL inspection
                        videoElement.addEventListener('loadstart', function() {
                            // Additional obfuscation
                            this.style.outline = 'none';
                        });
                        
                        // Monitor for developer tools
                        let devtools = {open: false, orientation: null};
                        setInterval(() => {
                            if (videoElement && document.getElementById('videoModal').style.display === 'block') {
                                if (window.outerHeight - window.innerHeight > 160 || window.outerWidth - window.innerWidth > 160) {
                                    if (!devtools.open) {
                                        devtools.open = true;
                                        videoElement.pause();
                                        showProtectionAlert();
                                    }
                                } else {
                                    devtools.open = false;
                                }
                            }
                        }, 500);
                    }
                }, 100);
            }
        }

        // Note modal functionality
        function openNoteModal(noteId) {
            // Check if course is pending
            if (courseAccess.isPending) {
                showPendingMessage();
                return;
            }
            
            // Check if course is purchased
            if (!courseAccess.isPurchased && noteId !== 'note-1') {
                showLockedMessage();
                return;
            }

            const noteData = {
                'note-1': {
                    title: '‡¶á‡¶¨‡¶æ‡¶∞‡¶§ ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶∞ ‡¶Æ‡ßå‡¶≤‡¶ø‡¶ï ‡¶ß‡¶æ‡¶∞‡¶£‡¶æ',
                    pdfUrl: 'https://example.com/path/to/note1.pdf',
                    content: `
                        <div style="padding: 20px;">
                            <h3 style="color: var(--primary-color); margin-bottom: 15px;">‡¶á‡¶¨‡¶æ‡¶∞‡¶§ ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶∞ ‡¶Æ‡ßå‡¶≤‡¶ø‡¶ï ‡¶ß‡¶æ‡¶∞‡¶£‡¶æ</h3>
                            <p style="line-height: 1.8; margin-bottom: 15px;">
                                ‡¶Ü‡¶∞‡¶¨‡¶ø ‡¶≠‡¶æ‡¶∑‡¶æ‡¶Ø‡¶º '‡¶á‡¶¨‡¶æ‡¶∞‡¶§' ‡¶∂‡¶¨‡ßç‡¶¶‡ßá‡¶∞ ‡¶Ö‡¶∞‡ßç‡¶• ‡¶π‡¶≤‡ßã ‡¶¨‡¶æ‡¶ï‡ßç‡¶Ø ‡¶¨‡¶æ ‡¶¨‡¶ï‡ßç‡¶§‡¶¨‡ßç‡¶Ø‡•§ ‡¶á‡¶∏‡¶≤‡¶æ‡¶Æ‡ßÄ ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶Ø‡¶º ‡¶á‡¶¨‡¶æ‡¶∞‡¶§ ‡¶¨‡¶≤‡¶§‡ßá ‡¶¨‡ßã‡¶ù‡¶æ‡¶Ø‡¶º
                                ‡¶ï‡ßÅ‡¶∞‡¶Ü‡¶®, ‡¶π‡¶æ‡¶¶‡¶ø‡¶∏ ‡¶¨‡¶æ ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ‡¶Ü‡¶∞‡¶¨‡¶ø ‡¶ó‡ßç‡¶∞‡¶®‡ßç‡¶•‡ßá‡¶∞ ‡¶¨‡¶æ‡¶ï‡ßç‡¶Ø‡¶æ‡¶Ç‡¶∂ ‡¶Ø‡¶æ ‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£ ‡¶ì ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ‡ßá ‡¶¨‡ßÅ‡¶ù‡¶§‡ßá ‡¶π‡¶Ø‡¶º‡•§
                            </p>
                            <h4 style="color: var(--primary-color); margin: 20px 0 10px 0;">‡¶á‡¶¨‡¶æ‡¶∞‡¶§ ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶∞ ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨:</h4>
                            <ul style="margin-left: 20px; line-height: 1.8;">
                                <li>‡¶ï‡ßÅ‡¶∞‡¶Ü‡¶®-‡¶π‡¶æ‡¶¶‡¶ø‡¶∏ ‡¶¨‡ßÅ‡¶ù‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ö‡¶™‡¶∞‡¶ø‡¶π‡¶æ‡¶∞‡ßç‡¶Ø</li>
                                <li>‡¶á‡¶∏‡¶≤‡¶æ‡¶Æ‡ßÄ ‡¶ú‡ßç‡¶û‡¶æ‡¶® ‡¶Ö‡¶∞‡ßç‡¶ú‡¶®‡ßá‡¶∞ ‡¶Æ‡ßÇ‡¶≤ ‡¶ö‡¶æ‡¶¨‡¶ø‡¶ï‡¶æ‡¶†‡¶ø</li>
                                <li>‡¶Ü‡¶∞‡¶¨‡¶ø ‡¶≠‡¶æ‡¶∑‡¶æ‡¶∞ ‡¶ó‡¶≠‡ßÄ‡¶∞ ‡¶ú‡ßç‡¶û‡¶æ‡¶® ‡¶≤‡¶æ‡¶≠</li>
                                <li>‡¶ß‡¶∞‡ßç‡¶Æ‡ßÄ‡¶Ø‡¶º ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶ï‡¶§‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡ßÄ‡¶Ø‡¶º</li>
                            </ul>
                        </div>
                    `
                },
                'note-2': {
                    title: '‡¶Ü‡¶∞‡¶¨‡¶ø ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶∞‡¶£‡ßá‡¶∞ ‡¶Æ‡ßÇ‡¶≤ ‡¶®‡¶ø‡¶Ø‡¶º‡¶Æ‡¶æ‡¶¨‡¶≤‡ßÄ',
                    pdfUrl: 'https://example.com/path/to/note2.pdf',
                    content: `
                        <div style="padding: 20px;">
                            <h3 style="color: var(--primary-color); margin-bottom: 15px;">‡¶Ü‡¶∞‡¶¨‡¶ø ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶∞‡¶£‡ßá‡¶∞ ‡¶Æ‡ßÇ‡¶≤ ‡¶®‡¶ø‡¶Ø‡¶º‡¶Æ‡¶æ‡¶¨‡¶≤‡ßÄ</h3>
                            <p style="line-height: 1.8; margin-bottom: 15px;">
                                ‡¶Ü‡¶∞‡¶¨‡¶ø ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶∞‡¶£ ‡¶¨‡¶æ ‡¶®‡¶æ‡¶π‡ßÅ ‡¶π‡¶≤‡ßã ‡¶∏‡ßá‡¶á ‡¶∂‡¶æ‡¶∏‡ßç‡¶§‡ßç‡¶∞ ‡¶Ø‡¶æ ‡¶Ü‡¶∞‡¶¨‡¶ø ‡¶≠‡¶æ‡¶∑‡¶æ‡¶∞ ‡¶¨‡¶æ‡¶ï‡ßç‡¶Ø ‡¶ó‡¶†‡¶®‡ßá‡¶∞ ‡¶®‡¶ø‡¶Ø‡¶º‡¶Æ‡¶æ‡¶¨‡¶≤‡ßÄ ‡¶®‡¶ø‡¶Ø‡¶º‡ßá ‡¶Ü‡¶≤‡ßã‡¶ö‡¶®‡¶æ ‡¶ï‡¶∞‡ßá‡•§
                            </p>
                        </div>
                    `
                },
                'note-3': {
                    title: '‡¶®‡¶æ‡¶π‡ßÅ ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶∞ ‡¶ß‡¶æ‡¶™‡¶∏‡¶Æ‡ßÇ‡¶π',
                    pdfUrl: 'https://example.com/path/to/note3.pdf',
                    content: `
                        <div style="padding: 20px;">
                            <h3 style="color: var(--primary-color); margin-bottom: 15px;">‡¶®‡¶æ‡¶π‡ßÅ ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶∞ ‡¶ß‡¶æ‡¶™‡¶∏‡¶Æ‡ßÇ‡¶π</h3>
                            <p style="line-height: 1.8; margin-bottom: 15px;">
                                ‡¶®‡¶æ‡¶π‡ßÅ ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡ßç‡¶∞‡¶Æ‡¶æ‡¶®‡ßÅ‡¶∏‡¶æ‡¶∞‡ßá ‡¶¨‡¶ø‡¶≠‡¶ø‡¶®‡ßç‡¶® ‡¶ß‡¶æ‡¶™ ‡¶Ö‡¶®‡ßÅ‡¶∏‡¶∞‡¶£ ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶Ø‡¶º‡•§
                            </p>
                        </div>
                    `
                },
                'note-4': {
                    title: '‡¶∏‡¶∞‡¶´ ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶∞ ‡¶ß‡¶æ‡¶™‡¶∏‡¶Æ‡ßÇ‡¶π',
                    pdfUrl: 'https://example.com/path/to/note4.pdf',
                    content: `
                        <div style="padding: 20px;">
                            <h3 style="color: var(--primary-color); margin-bottom: 15px;">‡¶∏‡¶∞‡¶´ ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶∞ ‡¶ß‡¶æ‡¶™‡¶∏‡¶Æ‡ßÇ‡¶π</h3>
                            <p style="line-height: 1.8; margin-bottom: 15px;">
                                ‡¶∏‡¶∞‡¶´ ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶ß‡¶æ‡¶™ ‡¶Ö‡¶®‡ßÅ‡¶∏‡¶∞‡¶£ ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶Ø‡¶º‡•§
                            </p>
                        </div>
                    `
                },
                'note-5': {
                    title: '‡¶á‡¶¨‡¶æ‡¶∞‡¶§ ‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£‡ßá‡¶∞ ‡¶ï‡ßå‡¶∂‡¶≤',
                    pdfUrl: 'https://example.com/path/to/note5.pdf',
                    content: `
                        <div style="padding: 20px;">
                            <h3 style="color: var(--primary-color); margin-bottom: 15px;">‡¶á‡¶¨‡¶æ‡¶∞‡¶§ ‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£‡ßá‡¶∞ ‡¶ï‡ßå‡¶∂‡¶≤</h3>
                            <p style="line-height: 1.8; margin-bottom: 15px;">
                                ‡¶á‡¶¨‡¶æ‡¶∞‡¶§ ‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶ï‡ßå‡¶∂‡¶≤ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡•§
                            </p>
                        </div>
                    `
                },
                'note-6': {
                    title: '‡¶Ö‡¶®‡ßÅ‡¶¨‡¶æ‡¶¶‡ßá‡¶∞ ‡¶®‡ßÄ‡¶§‡¶ø‡¶Æ‡¶æ‡¶≤‡¶æ',
                    pdfUrl: 'https://example.com/path/to/note6.pdf',
                    content: `
                        <div style="padding: 20px;">
                            <h3 style="color: var(--primary-color); margin-bottom: 15px;">‡¶Ö‡¶®‡ßÅ‡¶¨‡¶æ‡¶¶‡ßá‡¶∞ ‡¶®‡ßÄ‡¶§‡¶ø‡¶Æ‡¶æ‡¶≤‡¶æ</h3>
                            <p style="line-height: 1.8; margin-bottom: 15px;">
                                ‡¶∏‡¶†‡¶ø‡¶ï ‡¶Ö‡¶®‡ßÅ‡¶¨‡¶æ‡¶¶‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶®‡ßÄ‡¶§‡¶ø‡¶Æ‡¶æ‡¶≤‡¶æ ‡¶Ö‡¶®‡ßÅ‡¶∏‡¶∞‡¶£ ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶Ø‡¶º‡•§
                            </p>
                        </div>
                    `
                },
                'note-7': {
                    title: '‡¶ï‡ßÅ‡¶∞‡¶Ü‡¶®‡¶ø ‡¶á‡¶¨‡¶æ‡¶∞‡¶§‡ßá‡¶∞ ‡¶¨‡ßà‡¶∂‡¶ø‡¶∑‡ßç‡¶ü‡ßç‡¶Ø',
                    pdfUrl: 'https://example.com/path/to/note7.pdf',
                    content: `
                        <div style="padding: 20px;">
                            <h3 style="color: var(--primary-color); margin-bottom: 15px;">‡¶ï‡ßÅ‡¶∞‡¶Ü‡¶®‡¶ø ‡¶á‡¶¨‡¶æ‡¶∞‡¶§‡ßá‡¶∞ ‡¶¨‡ßà‡¶∂‡¶ø‡¶∑‡ßç‡¶ü‡ßç‡¶Ø</h3>
                            <p style="line-height: 1.8; margin-bottom: 15px;">
                                ‡¶ï‡ßÅ‡¶∞‡¶Ü‡¶®‡¶ø ‡¶á‡¶¨‡¶æ‡¶∞‡¶§‡ßá‡¶∞ ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶¨‡ßà‡¶∂‡¶ø‡¶∑‡ßç‡¶ü‡ßç‡¶Ø ‡¶∞‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§
                            </p>
                        </div>
                    `
                },
                'note-8': {
                    title: '‡¶π‡¶æ‡¶¶‡¶ø‡¶∏‡¶ø ‡¶á‡¶¨‡¶æ‡¶∞‡¶§‡ßá‡¶∞ ‡¶¨‡ßà‡¶∂‡¶ø‡¶∑‡ßç‡¶ü‡ßç‡¶Ø',
                    pdfUrl: 'https://example.com/path/to/note8.pdf',
                    content: `
                        <div style="padding: 20px;">
                            <h3 style="color: var(--primary-color); margin-bottom: 15px;">‡¶π‡¶æ‡¶¶‡¶ø‡¶∏‡¶ø ‡¶á‡¶¨‡¶æ‡¶∞‡¶§‡ßá‡¶∞ ‡¶¨‡ßà‡¶∂‡¶ø‡¶∑‡ßç‡¶ü‡ßç‡¶Ø</h3>
                            <p style="line-height: 1.8; margin-bottom: 15px;">
                                ‡¶π‡¶æ‡¶¶‡¶ø‡¶∏‡¶ø ‡¶á‡¶¨‡¶æ‡¶∞‡¶§‡ßá‡¶∞ ‡¶®‡¶ø‡¶ú‡¶∏‡ßç‡¶¨ ‡¶¨‡ßà‡¶∂‡¶ø‡¶∑‡ßç‡¶ü‡ßç‡¶Ø ‡¶∞‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§
                            </p>
                        </div>
                    `
                }
            };

            if (noteData[noteId]) {
                const note = noteData[noteId];
                document.getElementById('noteTitle').textContent = note.title;
                
                // Use PDF viewer if URL available, otherwise fallback to content
                if (note.pdfUrl) {
                    document.getElementById('noteContent').innerHTML = createProtectedPdfViewer(note.pdfUrl, note.title);
                } else {
                    document.getElementById('noteContent').innerHTML = note.content;
                }
                
                document.getElementById('noteModal').style.display = 'block';

                // Add additional protection
                setTimeout(() => {
                    const iframe = document.querySelector('#noteModal iframe');
                    if (iframe) {
                        // Prevent iframe URL inspection
                        iframe.addEventListener('load', function() {
                            this.style.outline = 'none';
                            this.contentDocument.addEventListener('contextmenu', function(e) {
                                e.preventDefault();
                                showProtectionAlert();
                                return false;
                            });
                        });
                    }
                }, 100);
            }
        }

        // Show locked message
        function showLockedMessage() {
            document.getElementById('lockedModal').style.display = 'block';
        }

        // Show pending message for locked content
        function showPendingMessage() {
            const modalContent = `
                <div style="text-align: center; padding: 20px;">
                    <h3 style="color: var(--primary-color); margin-bottom: 15px;">‡¶ï‡ßã‡¶∞‡ßç‡¶∏‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶ß‡ßÄ‡¶®</h3>
                    <p style="margin-bottom: 15px;">
                        ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ï‡ßã‡¶∞‡ßç‡¶∏‡¶ü‡¶ø ‡¶è‡¶ñ‡¶®‡¶ì ‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶π‡¶Ø‡¶º‡¶®‡¶ø‡•§ ‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶ï‡ßã‡¶∞‡ßç‡¶∏‡¶ü‡¶ø ‡¶ñ‡ßÅ‡¶≤‡¶§‡ßá ‡¶Ü‡¶ó‡¶æ‡¶Æ‡ßÄ ‡ß®‡ß™ ‡¶ò‡¶®‡ßç‡¶ü‡¶æ ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶¶‡¶ø‡¶®‡•§
                    </p>
                    <button onclick="closeModal('lockedModal')" style="
                        background: var(--primary-color);
                        color: white;
                        border: none;
                        padding: 10px 20px;
                        border-radius: 4px;
                        cursor: pointer;
                    ">
                        ‡¶†‡¶ø‡¶ï ‡¶Ü‡¶õ‡ßá
                    </button>
                </div>
            `;
            
            document.getElementById('lockedModal').style.display = 'block';
            document.querySelector('#lockedModal .modal-content').innerHTML = `
                <span class="close-modal" onclick="closeModal('lockedModal')">&times;</span>
                ${modalContent}
            `;
        }

        // Close modal
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
            
            // Clear video/note content when modal closes
            if (modalId === 'videoModal') {
                document.getElementById('videoContent').innerHTML = '';
            } else if (modalId === 'noteModal') {
                document.getElementById('noteContent').innerHTML = '';
            }
        }

        // Purchase course function
        async function purchaseCourse() {
            // Show loading overlay
            const loadingOverlay = document.createElement('div');
            loadingOverlay.className = 'loading-overlay';
            loadingOverlay.innerHTML = `
                <div class="loading-content">
                    <i class="fas fa-spinner fa-spin" style="font-size: 40px; color: var(--primary-color);"></i>
                    <p class="loading-text">‡¶ï‡ßã‡¶∞‡ßç‡¶∏ ‡¶ï‡ßç‡¶∞‡¶Ø‡¶º ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ ‡¶ö‡¶≤‡¶õ‡ßá...</p>
                </div>
            `;
            document.body.appendChild(loadingOverlay);
            
            try {
                const token = authService.getToken();
                if (!token) {
                    // Redirect to login or show login modal
                    alert('‡¶ï‡ßã‡¶∞‡ßç‡¶∏ ‡¶ï‡ßç‡¶∞‡¶Ø‡¶º ‡¶ï‡¶∞‡¶§‡ßá ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®');
                    return;
                }

                const purchaseData = {
                    courseId: 'practical-ibarot',
                    paymentMethod: 'bkash', // In real app, get from user selection
                    transactionId: 'TXN' + Math.floor(Math.random() * 1000000),
                    amount: 1500
                };
                
                const response = await backendAPI.purchaseCourse(purchaseData, token);
                
                if (response.success) {
                    // Update course access state
                    courseAccess = {
                        isPurchased: false, // Will be true after verification
                        userEmail: 'user@example.com', // Should get from user profile
                        purchaseDate: new Date().toISOString(),
                        isPending: true,
                        pendingUntil: new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString()
                    };
                    
                    // Save to localStorage
                    saveCourseState();
                    
                    // Update UI
                    updateUIPendingVerification();
                    
                    // Show success message
                    alert('‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶ß‡ßÄ‡¶® ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶≠‡ßá‡¶∞‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶®‡ßá‡¶∞ ‡¶™‡¶∞ ‡¶ï‡ßã‡¶∞‡ßç‡¶∏‡¶ü‡¶ø ‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º ‡¶π‡¶¨‡ßá‡•§');
                } else {
                    throw new Error(response.message || '‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶Ø‡¶º ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá');
                }
                
            } catch (error) {
                alert(error.message || '‡¶ï‡ßã‡¶∞‡ßç‡¶∏ ‡¶ï‡ßç‡¶∞‡¶Ø‡¶º ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶Ø‡¶º ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
                console.error('Purchase error:', error);
            } finally {
                // Hide loading overlay
                if (loadingOverlay.parentNode) {
                    document.body.removeChild(loadingOverlay);
                }
            }
        }

        // Handle manual payment form submission
        document.getElementById('manualPaymentForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const paymentData = {
                transactionId: formData.get('txnId'),
                paymentMethod: formData.get('paymentMethod'),
                amount: 1500,
                courseId: formData.get('courseId')
            };
            
            // Show loading state
            const submitBtn = this.querySelector('button[type="submit"]');
            const originalBtnText = submitBtn.innerHTML;
            submitBtn.innerHTML = '‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶ß‡ßÄ‡¶®... <span class="loading-spinner"></span>';
            submitBtn.disabled = true;
            
            try {
                const token = authService.getToken();
                if (!token) {
                    throw new Error('‡¶≤‡¶ó‡¶á‡¶® ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®');
                }
                
                const response = await backendAPI.verifyPayment(paymentData, token);
                
                if (response.success) {
                    // Update course access state
                    courseAccess = {
                        isPurchased: true,
                        userEmail: formData.get('email'),
                        purchaseDate: new Date().toISOString(),
                        isPending: false,
                        pendingUntil: null
                    };
                    
                    saveCourseState();
                    
                    // Show success message
                    document.getElementById('paymentMessage').innerHTML = `
                        <div class="success">
                            <i class="fas fa-check-circle"></i> ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶≠‡ßá‡¶∞‡¶ø‡¶´‡¶æ‡¶á ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ 
                            ‡¶è‡¶ñ‡¶® ‡¶Ü‡¶™‡¶®‡¶ø ‡¶∏‡¶ï‡¶≤ ‡¶ï‡ßã‡¶∞‡ßç‡¶∏ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶∏‡ßá‡¶∏ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§
                        </div>
                    `;
                    
                    // Close modal after 3 seconds and refresh UI
                    setTimeout(() => {
                        closeModal('lockedModal');
                        document.getElementById('paymentMessage').innerHTML = '';
                        updateUIAfterPurchase();
                    }, 3000);
                } else {
                    throw new Error(response.message || '‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶≠‡ßá‡¶∞‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶®‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá');
                }
                
            } catch (error) {
                document.getElementById('paymentMessage').innerHTML = `
                    <div class="error">
                        <i class="fas fa-exclamation-circle"></i> ${error.message || '‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§'}
                    </div>
                `;
                console.error('Payment submission error:', error);
            } finally {
                submitBtn.innerHTML = originalBtnText;
                submitBtn.disabled = false;
            }
        });

        // Submit review function
        async function submitReview() {
            const rating = document.getElementById('rating').value;
            const reviewText = document.getElementById('reviewText').value.trim();
            
            if (!rating) {
                alert('‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶∞‡ßá‡¶ü‡¶ø‡¶Ç ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®');
                return;
            }
            
            if (!reviewText) {
                alert('‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∞‡¶ø‡¶≠‡¶ø‡¶â ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®');
                return;
            }
            
            try {
                const token = authService.getToken();
                if (!token) {
                    throw new Error('‡¶∞‡¶ø‡¶≠‡¶ø‡¶â ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶§‡ßá ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®');
                }
                
                const reviewData = {
                    courseId: 'practical-ibarot',
                    rating: parseInt(rating),
                    review: reviewText
                };
                
                const response = await backendAPI.submitReview(reviewData, token);
                
                if (response.success) {
                    alert('‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∞‡¶ø‡¶≠‡¶ø‡¶â ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶ú‡¶Æ‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
                    
                    // Clear form
                    document.getElementById('rating').value = '';
                    document.getElementById('reviewText').value = '';
                    
                    // Refresh reviews
                    const reviews = await backendAPI.getCourseReviews('practical-ibarot');
                    updateReviewsUI(reviews);
                } else {
                    throw new Error(response.message || '‡¶∞‡¶ø‡¶≠‡¶ø‡¶â ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá');
                }
                
            } catch (error) {
                alert(error.message || '‡¶∞‡¶ø‡¶≠‡¶ø‡¶â ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
                console.error('Review submission error:', error);
            }
        }

        // Initialize the page
        async function init() {
            // Load course access state
            loadCourseState();
            
            // Check authentication
            if (!authService.isAuthenticated()) {
                // Redirect to login or show login modal
                console.log('User not authenticated');
            }
            
            try {
                // Fetch course data
                const courseId = 'practical-ibarot';
                const [courseDetails, videos, notes, reviews] = await Promise.all([
                    backendAPI.getCourseDetails(courseId),
                    backendAPI.getCourseVideos(courseId),
                    backendAPI.getCourseNotes(courseId),
                    backendAPI.getCourseReviews(courseId)
                ]);
                
                // Update UI with fetched data
                updateCourseUI(courseDetails, videos, notes, reviews);
                
                // Check course access
                const token = authService.getToken();
                if (token) {
                    const access = await backendAPI.checkCourseAccess(courseId, token);
                    if (access.hasAccess) {
                        courseAccess.isPurchased = true;
                        updateUIAfterPurchase();
                    } else if (access.status === 'pending') {
                        courseAccess.isPending = true;
                        updateUIPendingVerification();
                    }
                }
                
                // Set up content protection
                disableDownloads();
                
                // Close modals when clicking outside
                window.onclick = function(event) {
                    if (event.target.className === 'modal') {
                        event.target.style.display = 'none';
                        
                        // Clear video/note content when modal closes
                        if (event.target.id === 'videoModal') {
                            document.getElementById('videoContent').innerHTML = '';
                        } else if (event.target.id === 'noteModal') {
                            document.getElementById('noteContent').innerHTML = '';
                        }
                    }
                };
            } catch (error) {
                console.error('Initialization error:', error);
                // Show error to user
                alert('‡¶ï‡ßã‡¶∞‡ßç‡¶∏ ‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶™‡ßÉ‡¶∑‡ßç‡¶†‡¶æ‡¶ü‡¶ø ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
            }
        }

        // Initialize when page loads
        window.onload = init;
    </script>
</body>
</html>